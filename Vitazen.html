<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Triagem Inteligente</title>
    <style>
        :root {
            --primary: #2A7F62;
            --secondary: #4CAF50;
            --accent: #FF9800;
            --light: #F5F5F5;
            --dark: #333;
            --danger: #F44336;
            --warning: #FFC107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 15px 0;
            text-align: center;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 24px;
        }
        
        .selection-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            gap: 30px;
        }
        
        .selection-title {
            font-size: 24px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .selection-options {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .option-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            width: 280px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .option-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .option-title {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .patient-form, .staff-screen {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .voice-input-btn {
            position: absolute;
            right: 10px;
            top: 38px;
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 20px;
        }
        
        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }
        
        .symptom-item {
            background: #f9f9f9;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .symptom-item:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .symptom-checkbox {
            width: 20px;
            height: 20px;
        }
        
        .symptom-label {
            font-size: 16px;
            cursor: pointer;
        }
        
        .priority-list {
            margin-top: 20px;
        }
        
        .priority-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
        }
        
        .priority-high {
            border-left-color: var(--danger);
        }
        
        .priority-medium {
            border-left-color: var(--warning);
        }
        
        .priority-low {
            border-left-color: var(--secondary);
        }
        
        .patient-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .patient-name {
            font-weight: bold;
            font-size: 18px;
        }
        
        .priority-badge {
            padding: 5px 10px;
            border-radius: 20px;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }
        
        .badge-high {
            background-color: var(--danger);
        }
        
        .badge-medium {
            background-color: var(--warning);
        }
        
        .badge-low {
            background-color: var(--secondary);
        }
        
        .assistant-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .assistant-avatar {
            width: 80px;
            height: 80px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        
        .assistant-avatar:hover {
            transform: scale(1.05);
        }
        
        .assistant-avatar i {
            font-size: 36px;
            color: white;
        }
        
        .assistant-chat {
            position: absolute;
            bottom: 90px;
            right: 0;
            width: 300px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            padding: 15px;
            display: none;
        }
        
        .chat-messages {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 10px;
        }
        
        .message {
            padding: 8px 12px;
            border-radius: 18px;
            margin-bottom: 8px;
            max-width: 80%;
        }
        
        .assistant-message {
            background-color: #E8F5E8;
            align-self: flex-start;
        }
        
        .user-message {
            background-color: #E3F2FD;
            align-self: flex-end;
            margin-left: auto;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 8px;
        }
        
        .chat-input button {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
        }
        
        .libras-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .libras-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            display: none;
        }
        
        .libras-content {
            background: white;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 90%;
        }
        
        .libras-icon {
            font-size: 64px;
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1e6b52;
        }
        
        .btn-secondary {
            background-color: #e0e0e0;
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background-color: #d0d0d0;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .hidden {
            display: none;
        }
        
        .voice-indicator {
            display: inline-block;
            margin-left: 10px;
            color: var(--primary);
            font-size: 14px;
        }
        
        .empty-list {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .empty-list i {
            font-size: 48px;
            margin-bottom: 15px;
            color: #ccc;
        }
        
        @media (max-width: 768px) {
            .option-card {
                width: 100%;
                max-width: 300px;
            }
            
            .symptoms-grid {
                grid-template-columns: 1fr;
            }
            
            .assistant-chat {
                width: 280px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <i class="fas fa-hospital-alt"></i>
                <h1>Sistema de Triagem Inteligente</h1>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Tela de seleção inicial -->
        <div id="selection-screen" class="selection-screen">
            <h2 class="selection-title">Selecione o seu perfil</h2>
            <div class="selection-options">
                <div class="option-card" id="patient-option">
                    <div class="option-icon">
                        <i class="fas fa-user-injured"></i>
                    </div>
                    <h3 class="option-title">Paciente</h3>
                    <p>Registre seus dados e sintomas para agilizar o atendimento</p>
                </div>
                <div class="option-card" id="staff-option">
                    <div class="option-icon">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <h3 class="option-title">Funcionário</h3>
                    <p>Acesse a lista de pacientes por prioridade de atendimento</p>
                </div>
            </div>
        </div>
        
        <!-- Formulário do paciente -->
        <div id="patient-form" class="patient-form hidden">
            <h2>Registro de Paciente</h2>
            <form id="patient-data-form">
                <div class="form-group">
                    <label for="patient-name">
                        Nome completo 
                        <span class="voice-indicator"><i class="fas fa-microphone"></i> Fale seu nome</span>
                    </label>
                    <input type="text" id="patient-name" required>
                    <button type="button" class="voice-input-btn" data-target="patient-name">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label for="patient-age">
                        Idade 
                        <span class="voice-indicator"><i class="fas fa-microphone"></i> Fale sua idade</span>
                    </label>
                    <input type="number" id="patient-age" min="0" max="120" required>
                    <button type="button" class="voice-input-btn" data-target="patient-age">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                
                <div class="form-group">
                    <label>Sintomas (selecione todos que se aplicam)</label>
                    <div class="symptoms-grid">
                        <div class="symptom-item">
                            <input type="checkbox" id="febre" value="febre" class="symptom-checkbox">
                            <label for="febre" class="symptom-label">Febre</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="tosse" value="tosse" class="symptom-checkbox">
                            <label for="tosse" class="symptom-label">Tosse</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="dor-cabeca" value="dor de cabeça" class="symptom-checkbox">
                            <label for="dor-cabeca" class="symptom-label">Dor de cabeça</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="dor-garganta" value="dor de garganta" class="symptom-checkbox">
                            <label for="dor-garganta" class="symptom-label">Dor de garganta</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="falta-ar" value="falta de ar" class="symptom-checkbox">
                            <label for="falta-ar" class="symptom-label">Falta de ar</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="dor-corpo" value="dor no corpo" class="symptom-checkbox">
                            <label for="dor-corpo" class="symptom-label">Dor no corpo</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="nausea" value="náusea" class="symptom-checkbox">
                            <label for="nausea" class="symptom-label">Náusea</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="vomito" value="vômito" class="symptom-checkbox">
                            <label for="vomito" class="symptom-label">Vômito</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="cansaco" value="cansaço" class="symptom-checkbox">
                            <label for="cansaco" class="symptom-label">Cansaço</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="coriza" value="coriza" class="symptom-checkbox">
                            <label for="coriza" class="symptom-label">Coriza</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="tontura" value="tontura" class="symptom-checkbox">
                            <label for="tontura" class="symptom-label">Tontura</label>
                        </div>
                        <div class="symptom-item">
                            <input type="checkbox" id="calafrios" value="calafrios" class="symptom-checkbox">
                            <label for="calafrios" class="symptom-label">Calafrios</label>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="additional-info">
                        Informações adicionais (opcional)
                        <span class="voice-indicator"><i class="fas fa-microphone"></i> Fale suas informações</span>
                    </label>
                    <textarea id="additional-info" rows="3" placeholder="Descreva outros sintomas ou informações relevantes..."></textarea>
                    <button type="button" class="voice-input-btn" data-target="additional-info" style="top: 60px;">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
                
                <div class="navigation">
                    <button type="button" class="btn btn-secondary" id="back-to-selection">Voltar</button>
                    <button type="submit" class="btn btn-primary">Enviar dados</button>
                </div>
            </form>
        </div>
        
        <!-- Tela do funcionário -->
        <div id="staff-screen" class="staff-screen hidden">
            <h2>Lista de Pacientes por Prioridade</h2>
            <div class="priority-list" id="priority-list">
                <div class="empty-list" id="empty-list">
                    <i class="fas fa-clipboard-list"></i>
                    <h3>Nenhum paciente registrado</h3>
                    <p>Os pacientes aparecerão aqui após preencherem o formulário de triagem</p>
                </div>
            </div>
            <div class="navigation">
                <button type="button" class="btn btn-secondary" id="back-to-selection-staff">Voltar</button>
                <button type="button" class="btn btn-primary" id="refresh-list">Atualizar Lista</button>
            </div>
        </div>
    </div>
    
    <!-- Botão de Libras -->
    <button class="libras-btn" id="libras-btn">
        <i class="fas fa-hands"></i>
    </button>
    
    <!-- Modal de Libras -->
    <div class="libras-modal" id="libras-modal">
        <div class="libras-content">
            <div class="libras-icon">
                <i class="fas fa-hands"></i>
            </div>
            <h2>Atendimento em Libras</h2>
            <p>Faça os sinais direcionando-os à câmera do tablet para se comunicar com nosso assistente virtual.</p>
            <p>Nosso sistema irá interpretar seus gestos e ajudá-lo no registro das informações.</p>
            <button class="btn btn-primary" id="close-libras">Entendi</button>
        </div>
    </div>
    
    <!-- Assistente de Voz -->
    <div class="assistant-container">
        <div class="assistant-avatar" id="assistant-avatar">
            <i class="fas fa-robot"></i>
        </div>
        <div class="assistant-chat" id="assistant-chat">
            <div class="chat-messages" id="chat-messages">
                <div class="message assistant-message">
                    Olá! Sou o assistente virtual. Posso ajudá-lo no registro das suas informações?
                </div>
            </div>
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
                <button id="send-message"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script>
        // Elementos da interface
        const selectionScreen = document.getElementById('selection-screen');
        const patientForm = document.getElementById('patient-form');
        const staffScreen = document.getElementById('staff-screen');
        const patientOption = document.getElementById('patient-option');
        const staffOption = document.getElementById('staff-option');
        const backToSelectionBtn = document.getElementById('back-to-selection');
        const backToSelectionStaffBtn = document.getElementById('back-to-selection-staff');
        const patientDataForm = document.getElementById('patient-data-form');
        const priorityList = document.getElementById('priority-list');
        const emptyList = document.getElementById('empty-list');
        const assistantAvatar = document.getElementById('assistant-avatar');
        const assistantChat = document.getElementById('assistant-chat');
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message');
        const librasBtn = document.getElementById('libras-btn');
        const librasModal = document.getElementById('libras-modal');
        const closeLibrasBtn = document.getElementById('close-libras');
        const voiceInputBtns = document.querySelectorAll('.voice-input-btn');
        const refreshListBtn = document.getElementById('refresh-list');
        
        // Array para armazenar os pacientes cadastrados
        let registeredPatients = [];
        
        // Event Listeners
        patientOption.addEventListener('click', () => {
            selectionScreen.classList.add('hidden');
            patientForm.classList.remove('hidden');
            speak("Bem-vindo ao registro de paciente. Por favor, preencha suas informações para agilizar o atendimento. Você pode falar suas informações clicando no ícone de microfone ao lado de cada campo.");
        });
        
        staffOption.addEventListener('click', () => {
            selectionScreen.classList.add('hidden');
            staffScreen.classList.remove('hidden');
            renderPriorityList();
            speak("Acesso à lista de pacientes autorizado. Aqui você pode ver os pacientes ordenados por prioridade de atendimento.");
        });
        
        backToSelectionBtn.addEventListener('click', () => {
            patientForm.classList.add('hidden');
            selectionScreen.classList.remove('hidden');
        });
        
        backToSelectionStaffBtn.addEventListener('click', () => {
            staffScreen.classList.add('hidden');
            selectionScreen.classList.remove('hidden');
        });
        
        patientDataForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Coletar dados do formulário
            const name = document.getElementById('patient-name').value;
            const age = document.getElementById('patient-age').value;
            const additionalInfo = document.getElementById('additional-info').value;
            
            // Coletar sintomas selecionados
            const symptoms = [];
            document.querySelectorAll('.symptom-checkbox:checked').forEach(checkbox => {
                symptoms.push(checkbox.value);
            });
            
            // Determinar prioridade com base nos sintomas
            let priority = "low";
            if (symptoms.includes("falta de ar") || symptoms.includes("febre") && symptoms.length > 2) {
                priority = "high";
            } else if (symptoms.length >= 2) {
                priority = "medium";
            }
            
            // Calcular tempo de espera estimado
            let waitTime = "30-40 minutos";
            if (priority === "high") {
                waitTime = "Imediato";
            } else if (priority === "medium") {
                waitTime = "15-20 minutos";
            }
            
            // Criar objeto do paciente
            const patient = {
                name: name,
                age: age,
                priority: priority,
                symptoms: symptoms,
                waitTime: waitTime,
                additionalInfo: additionalInfo,
                timestamp: new Date().toLocaleString('pt-BR')
            };
            
            // Adicionar à lista de pacientes
            registeredPatients.push(patient);
            
            // Ordenar por prioridade (alta -> média -> baixa)
            registeredPatients.sort((a, b) => {
                const priorityOrder = { high: 0, medium: 1, low: 2 };
                return priorityOrder[a.priority] - priorityOrder[b.priority];
            });
            
            // Limpar formulário
            patientDataForm.reset();
            
            // Mostrar mensagem de sucesso
            alert("Dados registrados com sucesso! Aguarde ser chamado para o atendimento.");
            
            // Voltar para tela inicial
            patientForm.classList.add('hidden');
            selectionScreen.classList.remove('hidden');
        });
        
        refreshListBtn.addEventListener('click', () => {
            renderPriorityList();
            speak("Lista de pacientes atualizada.");
        });
        
        assistantAvatar.addEventListener('click', () => {
            assistantChat.style.display = assistantChat.style.display === 'block' ? 'none' : 'block';
        });
        
        sendMessageBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        librasBtn.addEventListener('click', () => {
            librasModal.style.display = 'flex';
        });
        
        closeLibrasBtn.addEventListener('click', () => {
            librasModal.style.display = 'none';
        });
        
        // Adicionar eventos para os botões de entrada por voz
        voiceInputBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const targetField = document.getElementById(targetId);
                simulateVoiceInput(targetField);
            });
        });
        
        // Funções
        function renderPriorityList() {
            priorityList.innerHTML = '';
            
            if (registeredPatients.length === 0) {
                priorityList.appendChild(emptyList);
                emptyList.style.display = 'block';
                return;
            }
            
            emptyList.style.display = 'none';
            
            registeredPatients.forEach(patient => {
                const priorityClass = `priority-${patient.priority}`;
                const badgeClass = `badge-${patient.priority}`;
                const priorityText = patient.priority === 'high' ? 'Alta' : 
                                   patient.priority === 'medium' ? 'Média' : 'Baixa';
                
                const patientElement = document.createElement('div');
                patientElement.className = `priority-item ${priorityClass}`;
                patientElement.innerHTML = `
                    <div class="patient-info">
                        <div class="patient-name">${patient.name}</div>
                        <div class="priority-badge ${badgeClass}">${priorityText}</div>
                    </div>
                    <div><strong>Idade:</strong> ${patient.age} anos</div>
                    <div><strong>Sintomas:</strong> ${patient.symptoms.join(', ') || 'Nenhum sintoma selecionado'}</div>
                    <div><strong>Informações adicionais:</strong> ${patient.additionalInfo || 'Nenhuma informação adicional'}</div>
                    <div><strong>Tempo estimado de espera:</strong> ${patient.waitTime}</div>
                    <div><strong>Horário do registro:</strong> ${patient.timestamp}</div>
                `;
                
                priorityList.appendChild(patientElement);
            });
        }
        
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message) {
                // Adiciona mensagem do usuário
                const userMessage = document.createElement('div');
                userMessage.className = 'message user-message';
                userMessage.textContent = message;
                chatMessages.appendChild(userMessage);
                
                // Limpa o campo de entrada
                chatInput.value = '';
                
                // Rola para a última mensagem
                chatMessages.scrollTop = chatMessages.scrollHeight;
                
                // Simula resposta do assistente
                setTimeout(() => {
                    const assistantMessage = document.createElement('div');
                    assistantMessage.className = 'message assistant-message';
                    
                    // Resposta simples baseada em palavras-chave
                    let response = "Entendi. Posso ajudá-lo com mais alguma coisa?";
                    
                    if (message.toLowerCase().includes('nome')) {
                        response = "Para registrar seu nome, por favor, preencha o campo 'Nome completo' no formulário acima. Você também pode falar seu nome clicando no ícone de microfone ao lado do campo.";
                    } else if (message.toLowerCase().includes('sintoma') || message.toLowerCase().includes('dor')) {
                        response = "Para registrar seus sintomas, marque as opções correspondentes na seção 'Sintomas' do formulário. Os sintomas estão organizados em quadros para facilitar a seleção.";
                    } else if (message.toLowerCase().includes('idade')) {
                        response = "Por favor, informe sua idade no campo específico do formulário. Você pode falar sua idade clicando no ícone de microfone ao lado do campo.";
                    } else if (message.toLowerCase().includes('obrigado') || message.toLowerCase().includes('obrigada')) {
                        response = "De nada! Estou aqui para ajudar. Se tiver mais alguma dúvida, é só perguntar.";
                    } else if (message.toLowerCase().includes('libras')) {
                        response = "Para usar o recurso de Libras, clique no botão laranja no canto inferior esquerdo da tela. Lá você encontrará instruções para se comunicar através de sinais.";
                    } else if (message.toLowerCase().includes('lista') || message.toLowerCase().includes('pacientes')) {
                        response = "Para ver a lista de pacientes, selecione a opção 'Funcionário' na tela inicial. Lá você encontrará todos os pacientes ordenados por prioridade de atendimento.";
                    }
                    
                    assistantMessage.textContent = response;
                    chatMessages.appendChild(assistantMessage);
                    
                    // Rola para a última mensagem
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    
                    // Fala a resposta
                    speak(response);
                }, 1000);
            }
        }
        
        // Função de síntese de voz
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'pt-BR';
                utterance.rate = 0.9;
                window.speechSynthesis.speak(utterance);
            }
        }
        
        // Simula entrada por voz (em um sistema real, isso seria substituído por um serviço de reconhecimento de voz)
        function simulateVoiceInput(field) {
            speak(`Por favor, fale seu ${field.previousElementSibling.textContent.trim().toLowerCase()}`);
            
            // Simula o reconhecimento de voz após um delay
            setTimeout(() => {
                let simulatedText = "";
                
                if (field.id === 'patient-name') {
                    simulatedText = "João da Silva";
                } else if (field.id === 'patient-age') {
                    simulatedText = "35";
                } else if (field.id === 'additional-info') {
                    simulatedText = "Estou me sentindo muito cansado além dos outros sintomas";
                }
                
                field.value = simulatedText;
                speak(`Entendi, ${simulatedText}.`);
            }, 3000);
        }
        
        // Inicialização
        window.addEventListener('load', () => {
            setTimeout(() => {
                speak("Bem-vindo ao Sistema de Triagem Inteligente. Você pode falar 'Paciente' ou 'Funcionário' para selecionar uma opção, ou tocar na tela para escolher.");
            }, 1000);
        });
    </script>
</body>
</html>